!include -c <AmericanAirlinesTestSuite.CommonFiles.PageLocators

!|Scenario         |verify and release booking                       |
|wait  for  element|{$MYTRIPSPAGE.cancellink}                        |
|click             |{$MYTRIPSPAGE.cancellink}                        |
|wait  for  element|{$MYTRIPSPAGE.confirmcancelbutton}               |
|click             |{$MYTRIPSPAGE.confirmcancelbutton}               |
|wait  for  element|{$MYTRIPSPAGE.backtomytripsbutton}               |
|click             |{$MYTRIPSPAGE.backtomytripsbutton}               |
|wait  for  element|{$MYTRIPSPAGE.removefromlistlink}                |
|click             |{$MYTRIPSPAGE.removefromlistlink}                |
|wait  for  element|{$SEARCHPAGE.myaccountmenulink}                  |
|click             |{$SEARCHPAGE.myaccountmenulink}                  |
|wait  for  element|{$SEARCHPAGE.logoutlink}                         |
|click             |{$SEARCHPAGE.logoutlink}                         |
|variable          |logoutSuccess   |equals  to                      |
|wait  for  element|{$LOGINPAGE.loginlink}                           |
|assert            |{$logoutSuccess}|true with message|Logout success|

!|Scenario            |book and reserve seats                                                                                                 |
|pause  execution  for|2                                     |seconds                                                                         |
|variable             |toflightExists                        |equals  to                                                                      |
|wait  for  element   |{$SEARCHRESULTSPAGE.firsttoresultbutton}                                                                               |
|pause  execution  for|4                                     |seconds                                                                         |
|click                |{$SEARCHRESULTSPAGE.firsttoresultbutton}                                                                               |
|pause  execution  for|3                                     |seconds                                                                         |
|variable             |fromFlightExists                      |equals  to                                                                      |
|wait  for  element   |{$SEARCHRESULTSPAGE.firstreturnresultbutton}                                                                           |
|pause  execution  for|4                                     |seconds                                                                         |
|click                |{$SEARCHRESULTSPAGE.firstreturnresultbutton}                                                                           |
|assert               |{$toflightExists}                     |true with message|Assert to flight exists                                       |
|assert               |{$fromFlightExists}                   |true with message|Assert from flight exists                                     |
|variable             |summaryPageOpened                     |equals  to                                                                      |
|wait  for  element   |{$SELECTIONSUMMARYPAGE.continuebutton}                                                                                 |
|assert               |{$summaryPageOpened}                  |true with message|Selection summary page opened                                 |
|click                |{$SELECTIONSUMMARYPAGE.continuebutton}                                                                                 |
|variable             |passengerSummaryPageOpened            |equals  to                                                                      |
|wait  for  element   |{$PASSENGERINFOPAGE.continuebutton}                                                                                    |
|assert               |{$passengerSummaryPageOpened}         |true with message|Assert passenger info page opened                             |
|click                |{$PASSENGERINFOPAGE.continuebutton}                                                                                    |
|wait  for  element   |(.//div[contains(@class,'is-available') and contains(@data-seatno,'B')])[1]                                            |
|pause  execution  for|5                                     |seconds                                                                         |
|click                |(.//div[contains(@class,'is-available') and contains(@data-seatno,'B')])[1]                                            |
|click                |{$SEATSELECTIONPAGE.nextbutton}                                                                                        |
|pause  execution  for|5                                     |seconds                                                                         |
|click                |(.//div[contains(@class,'is-available') and contains(@data-seatno,'B')])[2]                                            |
|pause  execution  for|4                                     |seconds                                                                         |
|click                |{$SEATSELECTIONPAGE.nextbutton}                                                                                        |
|variable             |costSummaryPageOpened                 |equals  to                                                                      |
|wait  for  element   |{$PAYMENTSPAGE.toflightnumber}                                                                                         |
|assert               |{$costSummaryPageOpened}              |true with message|Payments page opened                                          |
|click                |{$PAYMENTSPAGE.onholdradio}                                                                                            |
|wait  for  element   |{$PAYMENTSPAGE.holdtillradio}                                                                                          |
|click                |{$PAYMENTSPAGE.holdtillradio}                                                                                          |
|assert               |TRUE                                  |true with message|Reserving on hold                                             |
|click                |{$PAYMENTSPAGE.holdbutton}                                                                                             |
|variable             |successfulReservation                 |equals  to                                                                      |
|wait  for  element   |{$SUMMARYPAGE.aarecordlocator}                                                                                         |
|variable             |recordNumber                          |equals  to                                                                      |
|get  text  from      |{$SUMMARYPAGE.aarecordlocator}                                                                                         |
|assert               |{$successfulReservation}              |true with message|Successfully reserved with AA Record locator - {$recordNumber}|
|click                |{$SUMMARYPAGE.mytripslink}                                                                                             |


!| Scenario           |search for round trip flight                                                                                        |
|clear  text          |{$SEARCHPAGE.fromfield}                                                                                             |
|type                 |PHX                                     |into      |{$SEARCHPAGE.fromfield}|text field                              |
|wait  for  element   |.//a[contains(text(), 'PHX')]/..                                                                                    |
|click                |.//a[contains(text(), 'PHX')]/..                                                                                    |
|clear  text          |{$SEARCHPAGE.tofield}                                                                                               |
|type                 |SMF                                     |into      |{$SEARCHPAGE.tofield}  |text field                              |
|wait  for  element   |.//a[contains(text(), 'SMF')]/..                                                                                    |
|click                |.//a[contains(text(), 'SMF')]/..                                                                                    |
|select dates                                                                                                                              |
|                     |clear  text                             |{$SEARCHPAGE.todatefield}                                                  |
|                     |type                                    |11/22/2017|into                   |{$SEARCHPAGE.todatefield}    |text field|
|                     |clear  text                             |{$SEARCHPAGE.returndatefield}                                              |
|                     |type                                    |11/30/2017|into                   |{$SEARCHPAGE.returndatefield}|text field|
|pause  execution  for|5                                       |seconds                                                                    |
|click                |{$SEARCHPAGE.searchbutton}                                                                                          |



!| Scenario            |set result name _ at path _|resultname, pagepath|
|variable              |suitePath                  |equals to           |
|get Absolute Page Path|@pagepath                                       |

!| Scenario   |start browser and open url _|url       |
|start browser|${DEFAULT_BROWSER}                     |
|maximize browser                                     |
|open URL     |@url                                   |
|variable     |currentBrowser              |equals  to|
|show         |get current browser                    |


!| Scenario           |login with username _ and last name _ and password _|username,lastname,password                |
|variable             |cookieConsentExists                                 |equals  to                                |
|verify page contains |.//*[@id='cookieConsentAccept']                     |element                                   |
|If                   |{$cookieConsentExists}                                                                         |
|click                |.//*[@id='cookieConsentAccept']                                                                |
|pause  execution  for|4                                                   |seconds                                   |
|End If                                                                                                               |
|wait  for  element   |{$LOGINPAGE.loginlink}                                                                         |
|click                |{$LOGINPAGE.loginlink}                                                                         |
|pause  execution  for|4                                                   |seconds                                   |
|wait  for  element   |{$LOGINPAGE.usernamefield}                                                                     |
|clear  text          |{$LOGINPAGE.usernamefield}                                                                     |
|click                |{$LOGINPAGE.usernamefield}                                                                     |
|type                 |@username                                           |into|{$LOGINPAGE.usernamefield}|text field|
|pause  execution  for|1                                                   |seconds                                   |
|clear  text          |{$LOGINPAGE.passwordfield}                                                                     |
|click                |{$LOGINPAGE.passwordfield}                                                                     |
|type                 |@password                                           |into|{$LOGINPAGE.passwordfield}|text field|
|pause  execution  for|1                                                   |seconds                                   |
|clear  text          |{$LOGINPAGE.lastnamefield}                                                                     |
|click                |{$LOGINPAGE.lastnamefield}                                                                     |
|type                 |@lastname                                           |into|{$LOGINPAGE.lastnamefield}|text field|
|pause  execution  for|4                                                   |seconds                                   |
|click                |{$LOGINPAGE.loginbutton}                                                                       |

!| Scenario        |verify login action                                      |
|variable          |loginSuccess   |equals to                                |
|wait  for  element|{$SEARCHPAGE.myaccountmenulink}                          |
|assert            |{$loginSuccess}|true with message|Verify login is success|


!|Scenario            |select dates                                                 |
|click                |{$SEARCHPAGE.todatefield}                                    |
|loop                 |3                          |times                            |
|click                |.//*[@id='ui-datepicker-div']/div[2]/div/a                   |
|pause  execution  for|3                          |seconds                          |
|end  loop                                                                          |
|click                |.//*[@id='ui-datepicker-div']/div[2]/table//a[text()='22']/..|
|click                |{$SEARCHPAGE.returndatefield}                                |
|pause  execution  for|2                          |seconds                          |
|click                |.//*[@id='ui-datepicker-div']/div[1]/table//a[text()='30']/..|
